<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pizza Template Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; background:#0b0b10; color:#f5f5f5; }
    .page { max-width: 1080px; margin: 0 auto; padding: 24px 16px 64px; }
    .hero { padding: 40px 24px; border-radius: 16px; background: radial-gradient(circle at top left, #ff5c3b, #2b0b10 60%, #0b0b10); }
    .hero-kicker { font-size: 0.9rem; text-transform: uppercase; letter-spacing: .12em; opacity: .8; }
    .hero-title { font-size: 2.4rem; margin: 12px 0 8px; }
    .hero-subtitle { font-size: 1.05rem; max-width: 540px; opacity: .9; }
    .hero-cta { margin-top: 20px; display: flex; gap: 12px; flex-wrap: wrap; }
    .btn-primary, .btn-secondary {
      border-radius: 999px; padding: 10px 22px; font-size: 0.95rem; cursor: pointer; border: none;
    }
    .btn-primary { background:#ff5c3b; color:#fff; }
    .btn-secondary { background:transparent; border:1px solid rgba(255,255,255,.2); color:#fff; }

    .section { margin-top: 40px; padding: 24px 20px; border-radius: 16px; background:rgba(255,255,255,0.03); }
    .section-title { font-size: 1.4rem; margin-bottom: 10px; }
    .section-subtitle { font-size: .98rem; opacity:.85; margin-bottom: 12px; }

    .two-col { display:flex; flex-wrap:wrap; gap:18px; }
    .two-col > div { flex:1 1 260px; }

    .pill-row { display:flex; flex-wrap:wrap; gap:10px; margin-top: 8px; }
    .pill { font-size: .85rem; padding: 6px 10px; border-radius: 999px; background:rgba(255,255,255,.06); }

    .grid-3 { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:16px; margin-top: 10px; }
    .card { padding:14px 12px; border-radius: 14px; background:rgba(0,0,0,0.4); border:1px solid rgba(255,255,255,0.06); }
    .card-title { font-size:1rem; margin-bottom:4px; }
    .card-meta { font-size:.86rem; opacity:.8; margin-bottom:6px; }
    .card-text { font-size:.9rem; opacity:.9; }

    .contact-list { list-style:none; padding:0; margin:10px 0 0; font-size:.95rem; }
    .contact-list li { margin-bottom:4px; }

    .badge { font-size:.75rem; text-transform:uppercase; letter-spacing:.16em; opacity:.8; }

    @media (max-width: 640px) {
      .hero-title { font-size: 2rem; }
    }
  </style>
</head>
<body>
  <div class="page">

    <!-- HERO -->
    <section class="hero">
      <div class="hero-kicker" id="hero-kicker">
        <!-- e.g. "Fresh, Hand-Tossed Pizza in Tel Aviv" -->
      </div>
      <h1 class="hero-title" id="hero-headline">
        <!-- Main headline -->
      </h1>
      <p class="hero-subtitle" id="hero-subheadline">
        <!-- Subheadline -->
      </p>
      <div class="hero-cta">
        <button class="btn-primary" id="hero-cta-primary">
          <!-- Primary CTA -->
        </button>
        <button class="btn-secondary" id="hero-cta-secondary">
          <!-- Secondary CTA -->
        </button>
      </div>
      <div class="pill-row">
        <span class="pill" id="hero-pill-1"></span>
        <span class="pill" id="hero-pill-2"></span>
        <span class="pill" id="hero-pill-3"></span>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="section" id="section-about">
      <h2 class="section-title" id="about-title"></h2>
      <p class="section-subtitle" id="about-tagline"></p>

      <div class="two-col">
        <div>
          <p id="about-paragraph-1"></p>
          <p id="about-paragraph-2"></p>
          <p id="about-paragraph-3"></p>
        </div>
        <div>
          <div class="card">
            <div class="badge" id="why-badge"></div>
            <h3 class="card-title" id="why-title"></h3>
            <p class="card-text" id="why-text-1"></p>
            <p class="card-text" id="why-text-2"></p>
            <p class="card-text" id="why-text-3"></p>
          </div>
        </div>
      </div>
    </section>

    <!-- SPECIAL OFFERS -->
    <section class="section" id="section-offers">
      <h2 class="section-title" id="offers-title"></h2>
      <p class="section-subtitle" id="offers-subtitle"></p>

      <div class="grid-3">
        <article class="card">
          <div class="badge" id="offer-1-badge"></div>
          <h3 class="card-title" id="offer-1-name"></h3>
          <div class="card-meta" id="offer-1-price"></div>
          <p class="card-text" id="offer-1-description"></p>
        </article>

        <article class="card">
          <div class="badge" id="offer-2-badge"></div>
          <h3 class="card-title" id="offer-2-name"></h3>
          <div class="card-meta" id="offer-2-price"></div>
          <p class="card-text" id="offer-2-description"></p>
        </article>

        <article class="card">
          <div class="badge" id="offer-3-badge"></div>
          <h3 class="card-title" id="offer-3-name"></h3>
          <div class="card-meta" id="offer-3-price"></div>
          <p class="card-text" id="offer-3-description"></p>
        </article>
      </div>
    </section>

    <!-- OUR PIZZAS / MENU HIGHLIGHTS -->
    <section class="section" id="section-menu">
      <h2 class="section-title" id="menu-title"></h2>
      <p class="section-subtitle" id="menu-subtitle"></p>

      <div class="grid-3">
        <article class="card">
          <h3 class="card-title" id="pizza-1-name"></h3>
          <div class="card-meta" id="pizza-1-tags"></div>
          <p class="card-text" id="pizza-1-description"></p>
        </article>

        <article class="card">
          <h3 class="card-title" id="pizza-2-name"></h3>
          <div class="card-meta" id="pizza-2-tags"></div>
          <p class="card-text" id="pizza-2-description"></p>
        </article>

        <article class="card">
          <h3 class="card-title" id="pizza-3-name"></h3>
          <div class="card-meta" id="pizza-3-tags"></div>
          <p class="card-text" id="pizza-3-description"></p>
        </article>
      </div>
    </section>

    <!-- SERVICES (DELIVERY / TAKE AWAY / CATERING) -->
    <section class="section" id="section-services">
      <h2 class="section-title" id="services-title"></h2>
      <p class="section-subtitle" id="services-subtitle"></p>

      <div class="grid-3">
        <article class="card">
          <h3 class="card-title" id="service-1-title"></h3>
          <p class="card-text" id="service-1-description"></p>
        </article>
        <article class="card">
          <h3 class="card-title" id="service-2-title"></h3>
          <p class="card-text" id="service-2-description"></p>
        </article>
        <article class="card">
          <h3 class="card-title" id="service-3-title"></h3>
          <p class="card-text" id="service-3-description"></p>
        </article>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="section" id="section-contact">
      <h2 class="section-title" id="contact-title"></h2>
      <p class="section-subtitle" id="contact-subtitle"></p>

      <ul class="contact-list">
        <li id="contact-phone"></li>
        <li id="contact-address"></li>
        <li id="contact-hours-title"></li>
        <li id="contact-hours-line-1"></li>
        <li id="contact-hours-line-2"></li>
        <li id="contact-hours-line-3"></li>
      </ul>

      <div class="pill-row" style="margin-top:14px;">
        <span class="pill" id="contact-cta-1"></span>
        <span class="pill" id="contact-cta-2"></span>
      </div>
    </section>

  </div>
   <script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

const supabase = createClient(
  "https://xkchlqcwntcoakmyicqb.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhrY2hscWN3bnRjb2FrbXlpY3FiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4MDMyNzEsImV4cCI6MjA3ODM3OTI3MX0.702fpZLEHukvswrY0uwHknQYwdNDW-HeNsQxu_f1NnU"
);
async function reloadContentFromDB() {
  const params = new URLSearchParams(window.location.search);
  const projectId = params.get("project_id");
  if (!projectId) return;

  const { data } = await supabase
    .from("projects")
    .select("content_json")
    .eq("id", projectId)
    .single();

  if (!data?.content_json) return;

  applyContentToDOM(data.content_json);
}
  function applyContentToDOM(c) {
  // HERO
  document.getElementById("hero-kicker").innerText = c.home.hero.kicker;
  document.getElementById("hero-headline").innerText = c.home.hero.headline;
  document.getElementById("hero-subheadline").innerText = c.home.hero.subheadline;
  document.getElementById("hero-cta-primary").innerText = c.home.hero.primary_cta;
  document.getElementById("hero-cta-secondary").innerText = c.home.hero.secondary_cta;

  document.getElementById("hero-pill-1").innerText = c.home.hero.pills?.[0] ?? "";
  document.getElementById("hero-pill-2").innerText = c.home.hero.pills?.[1] ?? "";
  document.getElementById("hero-pill-3").innerText = c.home.hero.pills?.[2] ?? "";

  // ABOUT
  document.getElementById("about-title").innerText = c.about.title;
  document.getElementById("about-tagline").innerText = c.about.tagline;
  document.getElementById("about-paragraph-1").innerText = c.about.paragraphs?.[0] ?? "";
  document.getElementById("about-paragraph-2").innerText = c.about.paragraphs?.[1] ?? "";
  document.getElementById("about-paragraph-3").innerText = c.about.paragraphs?.[2] ?? "";
}
window.addEventListener("message", (e) => {
  if (e.data?.type === "content-updated") {
    console.log("iframe received update");
    reloadContentFromDB();
  }
});

 

</body>
</html>
