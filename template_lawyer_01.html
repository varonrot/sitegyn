<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pizza Template Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; background:#0b0b10; color:#f5f5f5; }
    .page { max-width: 1080px; margin: 0 auto; padding: 24px 16px 64px; }
    .hero { padding: 40px 24px; border-radius: 16px; background: radial-gradient(circle at top left, #ff5c3b, #2b0b10 60%, #0b0b10); }
    .hero-kicker { font-size: 0.9rem; text-transform: uppercase; letter-spacing: .12em; opacity: .8; }
    .hero-title { font-size: 2.4rem; margin: 12px 0 8px; }
    .hero-subtitle { font-size: 1.05rem; max-width: 540px; opacity: .9; }
    .hero-cta { margin-top: 20px; display: flex; gap: 12px; flex-wrap: wrap; }
    .btn-primary, .btn-secondary {
      border-radius: 999px; padding: 10px 22px; font-size: 0.95rem; cursor: pointer; border: none;
    }
    .btn-primary { background:#ff5c3b; color:#fff; }
    .btn-secondary { background:transparent; border:1px solid rgba(255,255,255,.2); color:#fff; }

    .section { margin-top: 40px; padding: 24px 20px; border-radius: 16px; background:rgba(255,255,255,0.03); }
    .section-title { font-size: 1.4rem; margin-bottom: 10px; }
    .section-subtitle { font-size: .98rem; opacity:.85; margin-bottom: 12px; }

    .two-col { display:flex; flex-wrap:wrap; gap:18px; }
    .two-col > div { flex:1 1 260px; }

    .pill-row { display:flex; flex-wrap:wrap; gap:10px; margin-top: 8px; }
    .pill { font-size: .85rem; padding: 6px 10px; border-radius: 999px; background:rgba(255,255,255,.06); }

    .grid-3 { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:16px; margin-top: 10px; }
    .card { padding:14px 12px; border-radius: 14px; background:rgba(0,0,0,0.4); border:1px solid rgba(255,255,255,0.06); }
    .card-title { font-size:1rem; margin-bottom:4px; }
    .card-meta { font-size:.86rem; opacity:.8; margin-bottom:6px; }
    .card-text { font-size:.9rem; opacity:.9; }

    .contact-list { list-style:none; padding:0; margin:10px 0 0; font-size:.95rem; }
    .contact-list li { margin-bottom:4px; }

    .badge { font-size:.75rem; text-transform:uppercase; letter-spacing:.16em; opacity:.8; }

    @media (max-width: 640px) {
      .hero-title { font-size: 2rem; }
    }
      section[data-page] {
  display: none;
}
#main-nav {
  position: sticky;
  top: 0;
  z-index: 50;

  padding: 12px 0;
  background: rgba(11,11,16,0.6);
  backdrop-filter: blur(6px);
}

#main-nav a {
  color: #fff;
  text-decoration: none;
  font-weight: 500;
  opacity: 0.85;
}

#main-nav a:hover {
  opacity: 1;
}

  </style>
</head>
<body>
  <div class="page">
<nav id="main-nav" style="display:flex; gap:16px; margin-bottom:24px;">
  <a href="#" data-page="home">Home</a>
  <a href="#" data-page="about">About</a>
  <a href="#" data-page="offers">Offers</a>
  <a href="#" data-page="menu">Menu</a>
  <a href="#" data-page="services">Services</a>
  <a href="#" data-page="contact">Contact</a>
</nav>

    <!-- HERO -->
    <section class="section hero" data-page="home">

      <div class="hero-kicker" id="hero-kicker">
        <!-- e.g. "Fresh, Hand-Tossed Pizza in Tel Aviv" -->
      </div>
      <h1 class="hero-title" id="hero-headline">
        <!-- Main headline -->
      </h1>
      <p class="hero-subtitle" id="hero-subheadline">
        <!-- Subheadline -->
      </p>
      <div class="hero-cta">
        <button class="btn-primary" id="hero-cta-primary">
          <!-- Primary CTA -->
        </button>
        <button class="btn-secondary" id="hero-cta-secondary">
          <!-- Secondary CTA -->
        </button>
      </div>
      <div class="pill-row">
        <span class="pill" id="hero-pill-1"></span>
        <span class="pill" id="hero-pill-2"></span>
        <span class="pill" id="hero-pill-3"></span>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="section" id="section-about" data-page="about">
      <h2 class="section-title" id="about-title"></h2>
      <p class="section-subtitle" id="about-tagline"></p>

      <div class="two-col">
        <div>
          <p id="about-paragraph-1"></p>
          <p id="about-paragraph-2"></p>
          <p id="about-paragraph-3"></p>
        </div>
        <div>
          <div class="card">
            <div class="badge" id="why-badge"></div>
            <h3 class="card-title" id="why-title"></h3>
            <p class="card-text" id="why-text-1"></p>
            <p class="card-text" id="why-text-2"></p>
            <p class="card-text" id="why-text-3"></p>
          </div>
        </div>
      </div>
    </section>

    <!-- SPECIAL OFFERS -->
   <section class="section" id="section-offers" data-page="offers">
      <h2 class="section-title" id="offers-title"></h2>
      <p class="section-subtitle" id="offers-subtitle"></p>

      <div class="grid-3">
        <article class="card">
          <div class="badge" id="offer-1-badge"></div>
          <h3 class="card-title" id="offer-1-name"></h3>
          <div class="card-meta" id="offer-1-price"></div>
          <p class="card-text" id="offer-1-description"></p>
        </article>

        <article class="card">
          <div class="badge" id="offer-2-badge"></div>
          <h3 class="card-title" id="offer-2-name"></h3>
          <div class="card-meta" id="offer-2-price"></div>
          <p class="card-text" id="offer-2-description"></p>
        </article>

        <article class="card">
          <div class="badge" id="offer-3-badge"></div>
          <h3 class="card-title" id="offer-3-name"></h3>
          <div class="card-meta" id="offer-3-price"></div>
          <p class="card-text" id="offer-3-description"></p>
        </article>
      </div>
    </section>

    <!-- OUR PIZZAS / MENU HIGHLIGHTS -->
   <section class="section" id="section-menu" data-page="menu">
      <h2 class="section-title" id="menu-title"></h2>
      <p class="section-subtitle" id="menu-subtitle"></p>

      <div class="grid-3">
        <article class="card">
          <h3 class="card-title" id="pizza-1-name"></h3>
          <div class="card-meta" id="pizza-1-tags"></div>
          <p class="card-text" id="pizza-1-description"></p>
        </article>

        <article class="card">
          <h3 class="card-title" id="pizza-2-name"></h3>
          <div class="card-meta" id="pizza-2-tags"></div>
          <p class="card-text" id="pizza-2-description"></p>
        </article>

        <article class="card">
          <h3 class="card-title" id="pizza-3-name"></h3>
          <div class="card-meta" id="pizza-3-tags"></div>
          <p class="card-text" id="pizza-3-description"></p>
        </article>
      </div>
    </section>

    <!-- SERVICES (DELIVERY / TAKE AWAY / CATERING) -->
    <section class="section" id="section-services" data-page="services">
      <h2 class="section-title" id="services-title"></h2>
      <p class="section-subtitle" id="services-subtitle"></p>

      <div class="grid-3">
        <article class="card">
          <h3 class="card-title" id="service-1-title"></h3>
          <p class="card-text" id="service-1-description"></p>
        </article>
        <article class="card">
          <h3 class="card-title" id="service-2-title"></h3>
          <p class="card-text" id="service-2-description"></p>
        </article>
        <article class="card">
          <h3 class="card-title" id="service-3-title"></h3>
          <p class="card-text" id="service-3-description"></p>
        </article>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="section" id="section-contact" data-page="contact">
      <h2 class="section-title" id="contact-title"></h2>
      <p class="section-subtitle" id="contact-subtitle"></p>

      <ul class="contact-list">
        <li id="contact-phone"></li>
        <li id="contact-address"></li>
        <li id="contact-hours-title"></li>
        <li id="contact-hours-line-1"></li>
        <li id="contact-hours-line-2"></li>
        <li id="contact-hours-line-3"></li>
      </ul>

      <div class="pill-row" style="margin-top:14px;">
        <span class="pill" id="contact-cta-1"></span>
        <span class="pill" id="contact-cta-2"></span>
      </div>
    </section>

  </div>
   <script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

/* ======================
   SUPABASE
====================== */
const supabase = createClient(
  "https://xkchlqcwntcoakmyicqb.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhrY2hscWN3bnRjb2FrbXlpY3FiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4MDMyNzEsImV4cCI6MjA3ODM3OTI3MX0.702fpZLEHukvswrY0uwHknQYwdNDW-HeNsQxu_f1NnU"
);

/* ======================
   HELPERS
====================== */
function getProjectId() {
  return new URLSearchParams(window.location.search).get("project_id");
}

function getPage() {
  return new URLSearchParams(window.location.search).get("page") || "home";
}

function renderPage(page) {
  document.querySelectorAll("section[data-page]").forEach(section => {
    section.style.display =
      section.dataset.page === page ? "block" : "none";
  });
}

/* ======================
   LOAD CONTENT
====================== */
async function reloadContentFromDB() {
  const projectId = getProjectId();
  if (!projectId) {
    console.warn("No project_id in URL");
    return;
  }

  const { data, error } = await supabase
    .from("projects")
    .select("content_json")
    .eq("id", projectId)
    .single();

  if (error || !data?.content_json) {
    console.error("Failed loading content", error);
    return;
  }

  applyContentToDOM(data.content_json);
}

/* ======================
   APPLY CONTENT
====================== */
function applyContentToDOM(c) {

  /* HERO */
  set("hero-kicker", c.home?.hero?.kicker);
  set("hero-headline", c.home?.hero?.headline);
  set("hero-subheadline", c.home?.hero?.subheadline);
  set("hero-cta-primary", c.home?.hero?.primary_cta);
  set("hero-cta-secondary", c.home?.hero?.secondary_cta);

  c.home?.hero?.pills?.forEach((t, i) =>
    set(`hero-pill-${i + 1}`, t)
  );

  /* ABOUT */
  set("about-title", c.about?.title);
  set("about-tagline", c.about?.tagline);

  c.about?.paragraphs?.forEach((t, i) =>
    set(`about-paragraph-${i + 1}`, t)
  );

  set("why-badge", c.about?.why?.badge);
  set("why-title", c.about?.why?.title);

  c.about?.why?.texts?.forEach((t, i) =>
    set(`why-text-${i + 1}`, t)
  );

  /* OFFERS */
  set("offers-title", c.offers?.title);
  set("offers-subtitle", c.offers?.subtitle);

  c.offers?.items?.forEach((item, i) => {
    const n = i + 1;
    set(`offer-${n}-badge`, item.badge);
    set(`offer-${n}-name`, item.name);
    set(`offer-${n}-price`, item.meta);
    set(`offer-${n}-description`, item.description);
  });

  /* MENU */
  set("menu-title", c.menu?.title);
  set("menu-subtitle", c.menu?.subtitle);

  c.menu?.items?.forEach((item, i) => {
    const n = i + 1;
    set(`pizza-${n}-name`, item.name);
    set(`pizza-${n}-tags`, item.tags);
    set(`pizza-${n}-description`, item.description);
  });

  /* SERVICES */
  set("services-title", c.services?.title);
  set("services-subtitle", c.services?.subtitle);

  c.services?.items?.forEach((item, i) => {
    const n = i + 1;
    set(`service-${n}-title`, item.title);
    set(`service-${n}-description`, item.description);
  });

  /* CONTACT */
  set("contact-title", c.contact?.title);
  set("contact-subtitle", c.contact?.subtitle);
  set("contact-phone", c.contact?.phone);
  set("contact-address", c.contact?.address);

  c.contact?.hours?.forEach((t, i) =>
    set(`contact-hours-line-${i + 1}`, t)
  );

  c.contact?.ctas?.forEach((t, i) =>
    set(`contact-cta-${i + 1}`, t)
  );
}

/* ======================
   UTIL
====================== */
function set(id, value) {
  const el = document.getElementById(id);
  if (el && value !== undefined) el.innerText = value;
}
function setupMenu() {
  const projectId = getProjectId();

  document.querySelectorAll("#main-nav a[data-page]").forEach(link => {
    link.style.cursor = "pointer";

    link.addEventListener("click", (e) => {
      e.preventDefault();

      const page = link.dataset.page;
      const url = new URL(window.location.href);

      url.searchParams.set("page", page);
      if (projectId) url.searchParams.set("project_id", projectId);

      window.history.pushState({}, "", url);
      renderPage(page);
    });
  });
}

/* ======================
   BOOT
====================== */
window.addEventListener("DOMContentLoaded", async () => {
  const page = getPage();
  renderPage(page);
  setupMenu();
  await reloadContentFromDB();
});
window.addEventListener("popstate", () => {
  renderPage(getPage());
});

</script>

</body>
</html>