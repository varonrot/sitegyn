<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Earnings â€” Realtime Dashboard</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --page-bg: #050b16;    /* overall background */
      --panel-bg: #121e2d;   /* inner panels / cards */
      --muted: #98b0bf;
      --accent: #18a7ff;
      --text: #e8f6ff;

      --success: #29c76f;
      --warning: #ffb85c;
      --danger: #ff5c7a;
      --info-soft: #3b82f6;

      --topbar-h:64px;
      --sidebar-w:260px;
      --sidebar-collapsed-w:72px;
      --nav-gap:6px;
      --nav-padding:9px 10px;
      --icon-size:18px;
      --promo-height:220px;
    }

    /* light theme variables (applied when body.light-theme) */
    body.light-theme{
      --page-bg: #f5f7fa;
      --panel-bg: #ffffff;
      --muted: #64707a;
      --accent: #2266ff;
      --text: #0b1726;
      --success: #24a85f;
      --warning: #f59e0b;
      --danger: #ef4444;
      --info-soft: #2563eb;
    }

    @media (prefers-color-scheme: light){
      :root.auto-theme {
        --page-bg: #f5f7fa;
        --panel-bg: #ffffff;
        --muted: #64707a;
        --accent: #2266ff;
        --text: #0b1726;
      }
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;-webkit-font-smoothing:antialiased}
    body{background:var(--page-bg);color:var(--text);transition:background .18s,color .18s}

    /* TOPBAR */
    .topbar{
      position:fixed; top:0; left:0; right:0;
      height:var(--topbar-h); display:flex; align-items:center;
      padding:8px 18px; gap:12px; background:#050b16;
      border-bottom:1px solid rgba(255,255,255,0.04); z-index:100;
    }
    .left-area{display:flex;align-items:center;gap:10px;min-width:160px}
    .logo{width:36px;height:36px;border-radius:999px;display:grid;place-items:center;
      background:radial-gradient(circle at 20% 20%,#4bf7ff,#0e9bff 40%,#2563eb 80%);
      font-weight:800;color:white;font-size:18px;
      box-shadow:0 0 18px rgba(24,167,255,.55);
    }
    .brand-title{font-weight:700;color:#ffffff;margin-left:6px;font-size:18px;letter-spacing:0.4px}
    .brand-title span{color:var(--accent);}
    .spacer{flex:1}
    .right-actions{display:flex;align-items:center;gap:10px}
    .icon-btn{width:38px;height:38px;border-radius:9px;display:inline-flex;align-items:center;justify-content:center;background:transparent;color:var(--text);position:relative;cursor:pointer;border:0}
    .icon-btn:hover{background:rgba(255,255,255,0.05)}
    .avatar{
    width:38px;
    height:38px;
    border-radius:50%;
    background-size: cover;
    background-position: center;
    box-shadow:0 4px 10px rgba(0,0,0,.25);
    cursor:pointer;
    border:2px solid rgba(255,255,255,0.18);
}

    .top-cta-edu{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 14px;border-radius:999px;
      background:var(--success);color:#fff;font-size:13px;
      font-weight:600;text-decoration:none;
      box-shadow:0 0 14px rgba(20,185,102,.5);
      border:0;cursor:pointer;
    }
    .top-cta-edu i{font-size:14px}

    /* MENU PANELS */
    .menu-panel{position:absolute; right:0; top:48px; min-width:220px; background:var(--panel-bg); border-radius:8px; padding:8px 0; box-shadow:0 14px 40px rgba(3,10,18,.6); border:1px solid rgba(255,255,255,0.03); display:none; z-index:200;}
    .menu-panel.show{display:block}
    .menu-title{padding:8px 14px;color:var(--muted);font-size:13px;border-bottom:1px solid rgba(255,255,255,0.02)}
    .menu-item{display:flex;align-items:center;gap:10px;padding:10px 14px;color:var(--text);cursor:pointer;font-size:15px;text-decoration:none}
    .menu-item:hover{background:rgba(0,0,0,0.06)}
    .menu-item .icon-small{width:30px;text-align:center;color:var(--muted)}

    .theme-panel{position:absolute; right:48px; top:48px; min-width:160px; background:var(--panel-bg); border-radius:8px; padding:6px; box-shadow:0 14px 40px rgba(3,10,18,.6); display:none; z-index:200; border:1px solid rgba(255,255,255,0.03)}
    .theme-panel.show{display:block}
    .theme-row{display:flex;align-items:center;gap:10px;padding:8px;border-radius:6px;cursor:pointer}
    .theme-row:hover{background:rgba(255,255,255,0.02)}
    .theme-row .check{margin-left:auto;color:var(--accent)}

    /* layout */
    .layout{display:flex;min-height:100vh;padding-top:var(--topbar-h)}

    /* SIDEBAR */
    .sidebar{
      position:fixed; top:var(--topbar-h); bottom:0; left:0;
      width:var(--sidebar-w);
      background:linear-gradient(180deg,#041831 0%,#064893 45%,#0f8fff 100%);
      padding:12px 6px; overflow:auto;
      transition:width .22s ease, transform .25s ease; border-right:1px solid rgba(0,0,0,0.4); z-index:90;
      display:flex; flex-direction:column;
      color:#e7f5ff;
    }
<!--    .sidebar::after{-->
<!--      content:"";-->
<!--      position:absolute;-->
<!--      right:-25px;-->
<!--      bottom:40px;-->
<!--      width:140px;-->
<!--      height:90px;-->
<!--      opacity:.16;-->
<!--      pointer-events:none;-->
<!--      background:url("data:image/svg+xml,%3Csvg%20viewBox='0%200%20120%2080'%20xmlns='http://www.w3.org/2000/svg'%3E%3Cpath%20d='M5%2060L55%2020L95%2010L75%2040L115%2060L65%2055L35%2070Z'%20fill='%23ffffff'%20fill-opacity='0.9'/%3E%3C/svg%3E") no-repeat center/contain;-->
<!--    }-->

    .section-title{color:rgba(231,245,255,.76);font-size:11px;margin:10px 8px 6px;padding-left:12px;text-transform:uppercase;letter-spacing:0.7px}
    .nav-list{display:flex;flex-direction:column;gap:var(--nav-gap);padding:0 6px 8px 6px}
    .nav-item{
      display:flex;align-items:center;gap:10px;padding:var(--nav-padding);border-radius:8px;color:#e7f5ff;text-decoration:none;
      transition:background .12s, color .12s, transform .08s;font-size:14px;
    }
    .nav-item .icon{width:34px;height:34px;border-radius:10px;display:grid;place-items:center;background:rgba(3,18,46,.3);color:#c8ddff;flex-shrink:0;font-size:var(--icon-size)}
    .nav-item .label{font-size:14px}
    .nav-item:hover{background:rgba(6,38,92,0.95);color:#fff;transform:translateY(-1px)}
    .nav-item.active{
      background:linear-gradient(90deg,rgba(21,128,255,.9),rgba(67,56,202,.9));
      color:#ffffff;
      box-shadow:0 0 16px rgba(37,99,235,.7);
    }
    .nav-item.active .icon{background:rgba(3,15,36,.6);color:#fff}

    .divider{height:1px;background:rgba(12,39,87,0.75);margin:10px 8px;border-radius:2px}

    .dropdown-btn{background:transparent;border:0;text-align:left;cursor:pointer;display:flex;align-items:center;gap:10px;padding:var(--nav-padding);border-radius:8px;color:#e7f5ff}
    .dropdown-arrow{margin-left:auto;transition:transform .18s ease}
    .dropdown-container{display:none;flex-direction:column;padding-left:46px;margin-top:6px;gap:6px}
    .dropdown-link{padding:4px 0;color:rgba(226,241,255,.85);font-size:13px;text-decoration:none}
    .dropdown-link:hover{color:#ffffff}

    .sidebar-footer{margin-top:auto;padding:12px}
    .promo{
      background:rgba(5,22,58,.9);border-radius:16px;padding:14px;border:1px solid rgba(84,180,255,0.28);
      display:flex;flex-direction:column;align-items:flex-start;gap:10px;position:relative;height:var(--promo-height);
      box-shadow:0 14px 35px rgba(3,10,30,.85);
    }
    .promo .close-btn{position:absolute;right:10px;top:8px;color:rgba(255,255,255,0.55);cursor:pointer;font-size:16px}
    .promo .art{width:72px;height:72px;border-radius:999px;display:grid;place-items:center;
      background:radial-gradient(circle at 20% 20%,#4bf7ff,#0e9bff 40%,#2563eb 80%);
      box-shadow:0 0 18px rgba(12,170,255,.65);
    }
    .promo h4{margin:6px 0 0;font-size:16px;color:#f9fbff}
    .promo p{margin:0;color:rgba(214,231,255,.85);font-size:13px}
    .promo .cta{margin-top:auto;width:100%;display:flex;justify-content:flex-start}
    .promo .cta a{background:#22c55e;color:white;padding:9px 14px;border-radius:999px;text-decoration:none;font-weight:700;display:inline-flex;align-items:center;gap:8px;font-size:13px}
    .promo .cta a i{font-size:13px}

    .sidebar.collapsed{width:var(--sidebar-collapsed-w)}
    .sidebar.collapsed .section-title,.sidebar.collapsed .label{display:none}
    .sidebar.collapsed .nav-item{justify-content:center;padding:8px}
    .sidebar.collapsed .dropdown-container{display:none!important}
    .sidebar.collapsed .promo{display:none}

    .sidebar::-webkit-scrollbar{width:8px}
    .sidebar::-webkit-scrollbar-thumb{background:rgba(3,21,45,.7);border-radius:8px}

    /* MAIN */
    .main{flex:1;margin-left:var(--sidebar-w);padding:22px 32px 120px;transition:margin-left .22s ease;background:radial-gradient(circle at top,#10203b,#050b16 55%);}
    .main.narrow{margin-left:var(--sidebar-collapsed-w)}
    .content-wide{width:100%;}
    .panel{background:var(--panel-bg);border-radius:14px;padding:18px;margin-bottom:18px;border:1px solid rgba(255,255,255,0.03)}

    /* DASHBOARD GRID */
    .dash-grid-top{
      display:grid;
      grid-template-columns: minmax(0,2.1fr) minmax(0,1.4fr) minmax(0,1.4fr);
      gap:16px;
      margin-bottom:18px;
    }
    .dash-grid-mid{
      display:grid;
      grid-template-columns: minmax(0,2.1fr) minmax(0,1.6fr);
      gap:16px;
      margin-bottom:18px;
    }
    .dash-grid-bottom{
      display:grid;
      grid-template-columns: repeat(3,minmax(0,1fr));
      gap:16px;
    }

    @media (max-width:1180px){
      .dash-grid-top{grid-template-columns: minmax(0,1.7fr) minmax(0,1.5fr);}
      .dash-grid-mid{grid-template-columns: minmax(0,1fr);}
      .dash-grid-bottom{grid-template-columns: repeat(2,minmax(0,1fr));}
    }
    @media (max-width:880px){
      .main{margin-left:0;padding:14px}
      .dash-grid-top{grid-template-columns: minmax(0,1fr);}
      .dash-grid-bottom{grid-template-columns: minmax(0,1fr);}
    }

    .card{
      background:var(--panel-bg);
      border-radius:14px;
      padding:16px 16px 14px;
      border:1px solid rgba(255,255,255,0.04);
      box-shadow:0 10px 30px rgba(0,0,0,.45);
      position:relative;
      overflow:hidden;
    }
    .card-soft{
      background:linear-gradient(135deg,rgba(24,167,255,0.08),rgba(24,167,255,0.02));
      border-color:rgba(24,167,255,0.25);
    }
    .card-header{
      display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;
    }
    .card-title{font-size:15px;font-weight:600}
    .card-sub{font-size:13px;color:var(--muted);margin-top:2px}
    .pill{
      padding:3px 9px;border-radius:999px;font-size:11px;
      background:rgba(15,118,255,.16);color:#cce4ff;border:1px solid rgba(37,99,235,.5);
    }

    .kpi-row{display:flex;gap:14px;margin-top:14px;flex-wrap:wrap}
    .kpi{
      flex:1;min-width:130px;
      padding:10px 10px 9px;border-radius:12px;
      background:rgba(3,15,40,.9);
      border:1px solid rgba(255,255,255,0.04);
    }
    .kpi-label{font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:0.6px}
    .kpi-value{font-size:20px;font-weight:700;margin-top:4px}
    .kpi-change{font-size:12px;margin-top:2px}
    .kpi-change.positive{color:var(--success)}
    .kpi-change.negative{color:var(--danger)}

    .progress-bar-track{
      width:100%;height:7px;border-radius:999px;
      background:rgba(15,23,42,0.9);overflow:hidden;margin-top:8px;
    }
    .progress-bar-fill{
      height:100%;border-radius:999px;
      background:linear-gradient(90deg,#22c55e,#4ade80);
      width:75%;
    }

    .avatar-stack{
      display:flex;align-items:center;gap:0;
      margin-top:10px;
    }
    .avatar-stack img{
      width:26px;height:26px;border-radius:999px;border:2px solid #0b1726;
      object-fit:cover;box-shadow:0 2px 6px rgba(0,0,0,.5);
      margin-right:-8px;
    }
    .avatar-stack span{
      font-size:11px;color:var(--muted);margin-left:8px;
    }

    .chip-date{
      width:60px;height:60px;border-radius:999px;
      background:radial-gradient(circle at 30% 20%,#4bf7ff,#2563eb);
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      font-weight:700;color:#eff6ff;font-size:14px;
    }
    .chip-date small{font-size:10px;font-weight:500;opacity:.85}

    .btn-green{
      display:inline-flex;align-items:center;gap:8px;
      padding:9px 14px;border-radius:999px;
      background:var(--success);color:#f9fdfb;font-size:13px;font-weight:600;
      border:0;text-decoration:none;cursor:pointer;
      box-shadow:0 0 16px rgba(34,197,94,.6);
      margin-top:16px;
    }
    .btn-green i{font-size:14px}

    .mini-tag{font-size:11px;padding:3px 7px;border-radius:999px;background:rgba(15,118,255,0.16);color:#bfdbfe}
    .stat-row{display:flex;justify-content:space-between;align-items:center;margin:6px 0;font-size:13px;color:var(--muted);}
    .stat-row strong{color:var(--text);}

    .bar-chart{
      margin-top:14px;display:flex;align-items:flex-end;gap:8px;height:120px;
    }
    .bar{
      flex:1;border-radius:6px 6px 0 0;
      background:linear-gradient(180deg,#38bdf8,#0ea5e9);
      position:relative;
    }
    .bar:nth-child(2){height:70%;opacity:.85}
    .bar:nth-child(3){height:90%;}
    .bar:nth-child(4){height:55%;opacity:.8}
    .bar:nth-child(5){height:65%;}
    .bar:nth-child(6){height:40%;opacity:.7}
    .bar-labels{display:flex;justify-content:space-between;margin-top:6px;font-size:11px;color:var(--muted);}

    .activity-item{font-size:13px;color:var(--muted);margin-bottom:10px;display:flex;justify-content:space-between;gap:8px}
    .activity-item span:first-child{color:var(--text);}

    .pill-small{
      padding:2px 7px;border-radius:999px;font-size:10px;
      background:rgba(15,23,42,.9);color:var(--muted);
    }

    @media (max-width:920px){
      .sidebar{transform:translateX(-110%);position:fixed}
      .sidebar.open{transform:translateX(0)}
      .main{margin-left:0;padding:12px}
      .right-actions .cart-btn,
      .right-actions .notify-btn,
      .right-actions .apps-btn{display:none}
      .right-actions{gap:8px}
    }

    .icon-btn:focus, .menu-item:focus, .dropdown-btn:focus{outline:2px solid rgba(28,121,210,.18);outline-offset:2px}
      .dashboard-section {
  margin-top: 24px;
}

.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}

.card {
  background: linear-gradient(180deg, #0f1b2d, #0b1626);
  border-radius: 16px;
  padding: 20px;
  border: 1px solid rgba(255,255,255,0.05);
  color: #e5e7eb;
}

.card h3 {
  margin: 0 0 6px;
  font-size: 16px;
}

.sub {
  font-size: 13px;
  color: #94a3b8;
  margin-bottom: 12px;
}

ul {
  padding-left: 18px;
  font-size: 13px;
}

ul li {
  margin-bottom: 6px;
}

.warn {
  color: #f59e0b;
}

/* progress */
.progress {
  height: 6px;
  background: #1f2937;
  border-radius: 6px;
  overflow: hidden;
  margin-bottom: 8px;
}

.bar {
  height: 100%;
  background: linear-gradient(90deg, #22c55e, #4ade80);
}

.small {
  font-size: 12px;
  color: #94a3b8;
}

/* buttons */
.btn {
  margin-top: 12px;
  padding: 10px;
  width: 100%;
  border-radius: 12px;
  border: none;
  background: #22c55e;
  font-weight: 600;
  cursor: pointer;
}

.btn.green {
  background: #22c55e;
}

/* calendar */
.top-row {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  margin-bottom: 10px;
}

.link {
  color: #60a5fa;
}

.calendar-days {
  font-size: 12px;
  color: #64748b;
  margin-bottom: 10px;
}

.calendar-dates span {
  display: inline-block;
  width: 30px;
  text-align: center;
  border-radius: 50%;
  margin: 4px;
}

.blue { background:#2563eb; color:#fff; }
.green { border:1px solid #22c55e; color:#22c55e; }
.orange { border:1px solid #f59e0b; color:#f59e0b; }

/* events */
.events li.blue { color:#60a5fa }
.events li.green { color:#22c55e }
.events li.orange { color:#f59e0b }
.events li.red { color:#ef4444 }

/* price */
.price {
  font-size: 28px;
  font-weight: 700;
  color: #4ade80;
}

.price span {
  font-size: 14px;
}
.calendar-events-falcon {
  margin-top: 24px;
}

.cef-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}

.cef-card {
  background: linear-gradient(180deg, #0f1b2d, #0b1626);
  border-radius: 16px;
  padding: 22px;
<!--  border: 1px solid rgba(255,255,255,0.05);-->
  color: #e5e7eb;
}

/* CALENDAR */
.calendar-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
}

.new-schedule {
  background: none;
  border: none;
  color: #60a5fa;
  font-size: 13px;
  cursor: pointer;
}

.calendar-nav {
  font-size: 13px;
  color: #94a3b8;
}

.calendar-weekdays,
.calendar-days {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  text-align: center;
}

.calendar-weekdays {
  font-size: 12px;
  color: #64748b;
  margin-bottom: 8px;
}

.calendar-days span {
  width: 34px;
  height: 34px;
  margin: 4px auto;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-size: 13px;
}

.muted { color: #475569; }

.active {
  background: #2563eb;
  color: #fff;
}

.range-blue {
  border: 1px solid #2563eb;
  color: #2563eb;
}

.range-green {
  border: 1px solid #22c55e;
  color: #22c55e;
}

.range-orange {
  border: 1px solid #f59e0b;
  color: #f59e0b;
}

/* EVENTS */
.events-card h3 {
  margin-bottom: 4px;
}

.sub {
  font-size: 13px;
  color: #94a3b8;
  margin-bottom: 16px;
}

.events-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.events-list li {
  position: relative;
  padding-left: 16px;
  margin-bottom: 14px;
  font-size: 14px;
}

.events-list .bar {
  position: absolute;
  left: 0;
  top: 3px;
  width: 3px;
  height: 100%;
  border-radius: 2px;
}

.events-list .date {
  font-size: 12px;
  color: #64748b;
  margin-top: 4px;
}

.blue .bar { background: #3b82f6; }
.green .bar { background: #22c55e; }
.orange .bar { background: #f59e0b; }
.red .bar { background: #ef4444; }

/* FALCON */
.highlight {
  color: #60a5fa;
}

.price-box {
  background: #12361f;
  padding: 16px;
  border-radius: 12px;
  margin: 14px 0;
}

.price {
  font-size: 32px;
  font-weight: 700;
  color: #4ade80;
}

.per {
  font-size: 14px;
  color: #9ae6b4;
  margin-left: 4px;
}

.falcon-features {
  font-size: 14px;
  margin-bottom: 18px;
}

.falcon-features li {
  margin-bottom: 6px;
}

.falcon-btn {
  width: 100%;
  padding: 12px;
  border-radius: 12px;
  border: none;
  background: #22c55e;
  color: #052e16;
  font-weight: 600;
  cursor: pointer;
}

/* RESPONSIVE */
@media (max-width: 1100px) {
  .cef-grid {
    grid-template-columns: 1fr;
  }
}
/* ===============================
 DASHBOARD HEADER
 Section: dashboard.header
=============================== */
.dash-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:28px;
}

.dash-title{
  font-size:28px;
  font-weight:700;
  margin:0;
}

.dash-subtitle{
  font-size:13px;
  color:#94a3b8;
}

.dash-btn-primary{
  background:#0f8fff;
  color:#fff;
  border:none;
  padding:10px 14px;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
}


/* ===============================
 STATS OVERVIEW
 Section: dashboard.stats
=============================== */
.dash-stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:16px;
  margin-bottom:32px;
}

.dash-stat-card{
  background:#0b1220;
  border:1px solid rgba(255,255,255,.06);
  border-radius:12px;
  padding:16px;
}

.stat-label{
  font-size:12px;
  color:#94a3b8;
}

.stat-value{
  font-size:26px;
  font-weight:700;
  margin-top:6px;
  display:block;
}

.stat-ok{
  color:#22c55e;
}


/* ===============================
 MODULES GRID
 Section: dashboard.modules
=============================== */
.dash-modules{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:20px;
  margin-bottom:32px;
}


/* ===============================
 GENERIC CARD
 Used by: appointments / leads / settings
=============================== */
.dash-card{
  background:#0b1220;
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px;
  overflow:hidden;
}

.dash-card-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 16px;
  border-bottom:1px solid rgba(255,255,255,.06);
}

.dash-card-header h3{
  margin:0;
  font-size:16px;
}

.dash-card-meta{
  font-size:12px;
  color:#94a3b8;
}

.dash-card-body{
  padding:14px 16px;
}


/* ===============================
 ROW ITEMS
 Used in appointments & leads
=============================== */
.row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:8px 0;
  font-size:13px;
  border-bottom:1px dashed rgba(255,255,255,.05);
}

.row:last-child{
  border-bottom:none;
}


/* ===============================
 BADGES
=============================== */
.badge{
  font-size:11px;
  padding:4px 8px;
  border-radius:999px;
  font-weight:600;
}

.confirmed{
  background:rgba(34,197,94,.15);
  color:#22c55e;
}

.pending{
  background:rgba(245,158,11,.15);
  color:#f59e0b;
}


/* ===============================
 SETTINGS / FEATURES
 Section: dashboard.settings
=============================== */
.feature-list{
  list-style:none;
  padding:0;
  margin:0;
}

.feature-list li{
  font-size:13px;
  padding:6px 0;
}

.feature-list .on{
  color:#22c55e;
}

.feature-list .off{
  color:#64748b;
}

  </style>
</head>
<body>

  <!-- TOPBAR -->
  <header class="topbar" role="banner">
    <div class="left-area">
      <button class="icon-btn" id="sidebarToggle" title="Toggle sidebar" aria-label="Toggle sidebar"><i class="fa-solid fa-bars"></i></button>
      <a href="landing.html" class="spa-link" style="text-decoration:none; display:flex;align-items:center;gap:8px">
         <div class="logo">A</div>
         <div class="brand-title">analyst44</div>
      </a>
    </div>

    <div class="spacer"></div>

<!--    <div class="right-actions" role="navigation" aria-label="Top actions">-->
<!--      &lt;!&ndash; education CTA &ndash;&gt;-->
<!--      <a href="education/index.html" class="top-cta-edu spa-link">-->
<!--        <i class="fa-solid fa-play"></i>-->
<!--        <span>Open education hub</span>-->
<!--      </a>-->

      <div class="dropdown" style="position:relative">
        <button class="icon-btn" id="themeToggle" title="Theme" aria-haspopup="true" aria-expanded="false"><i class="fa-regular fa-moon"></i></button>
        <div class="theme-panel" id="themePanel" role="menu" aria-hidden="true">
          <div class="menu-title">Theme</div>
          <div class="theme-row" data-theme="light" role="menuitem" tabindex="0"><span style="width:26px;text-align:center"><i class="fa-solid fa-sun"></i></span><div>Light</div><div class="check" aria-hidden="true" style="display:none">âœ“</div></div>
          <div class="theme-row" data-theme="dark" role="menuitem" tabindex="0"><span style="width:26px;text-align:center"><i class="fa-regular fa-moon"></i></span><div>Dark</div><div class="check" aria-hidden="true" style="display:none">âœ“</div></div>
          <div class="theme-row" data-theme="auto" role="menuitem" tabindex="0"><span style="width:26px;text-align:center"><i class="fa-regular fa-circle-half-stroke"></i></span><div>Auto</div><div class="check" aria-hidden="true" style="display:none">âœ“</div></div>
        </div>
      </div>

      <!-- cart -->
      <a class="icon-btn cart-btn" href="purchase.html" title="Cart" aria-label="Cart"><i class="fa-solid fa-cart-shopping"></i></a>

      <!-- notifications -->
      <a class="icon-btn notify-btn" href="notifications.html" title="Notifications" aria-label="Notifications"><i class="fa-regular fa-bell"></i></a>

      <!-- apps -->
      <a class="icon-btn apps-btn" href="apps.html" title="Apps" aria-label="Apps"><i class="fa-solid fa-grid"></i></a>

    <div class="dropdown" id="userDropdown">
    <div class="avatar" id="avatarBtn" aria-haspopup="true" aria-expanded="false" title="User"></div>
    <div class="menu-panel" id="userMenu" role="menu" aria-hidden="true">
        <div class="menu-title">Account</div>

        <a class="menu-item" href="purchase.html">
            <span class="icon-small"><i class="fa-solid fa-crown"></i></span>
            <span>Upgrade to Pro</span>
        </a>

        <a class="menu-item" href="profile.html">
            <span class="icon-small"><i class="fa-regular fa-user"></i></span>
            <span>Profile</span>
        </a>

        <a class="menu-item" href="feedback.html">
            <span class="icon-small"><i class="fa-regular fa-comment-dots"></i></span>
            <span>Feedback</span>
        </a>

        <a class="menu-item" href="settings.html">
            <span class="icon-small"><i class="fa-solid fa-gear"></i></span>
            <span>Settings</span>
        </a>

        <!-- â­ Logout -->
        <a class="menu-item" href="#" id="logoutBtn">
            <span class="icon-small"><i class="fa-solid fa-right-from-bracket"></i></span>
            <span>Logout</span>
        </a>

    </div>
</div>

  </header>

  <div class="layout">
   <aside class="sidebar" id="sidebar" role="navigation" aria-label="Main navigation">

  <!-- MAIN -->
  <div class="section-title">Main</div>
  <nav class="nav-list" aria-label="Main nav">

    <a class="nav-item spa-link" href="index.html">
      <span class="icon"><i class="fa-solid fa-house-chimney"></i></span>
      <span class="label">Home</span>
    </a>

    <!-- AI ANALYSIS (PRIMARY) -->
    <a class="nav-item primary active spa-link" href="realtime_scores.html">
      <span class="icon"><i class="fa-solid fa-brain"></i></span>
      <span class="label">AI Analysis</span>
    </a>

    <!-- DASHBOARD (PRIMARY) -->
    <a class="nav-item primary spa-link" href="dashboard.html">
      <span class="icon"><i class="fa-solid fa-gauge-high"></i></span>
      <span class="label">Dashboard</span>
    </a>

    <a class="nav-item spa-link" href="calendar.html">
      <span class="icon"><i class="fa-solid fa-calendar-days"></i></span>
      <span class="label">Earnings Calendar</span>
    </a>

  </nav>

  <div class="divider"></div>

  <!-- ANALYSIS -->
  <div class="section-title">Analysis</div>
  <nav class="nav-list" aria-label="Analysis">

    <a class="nav-item spa-link" href="income.html">
      <span class="icon"><i class="fa-regular fa-file-lines"></i></span>
      <span class="label">Income Statement</span>
    </a>

    <a class="nav-item spa-link" href="balance.html">
      <span class="icon"><i class="fa-solid fa-scale-balanced"></i></span>
      <span class="label">Balance Sheet</span>
    </a>

    <a class="nav-item spa-link" href="cashflow.html">
      <span class="icon"><i class="fa-solid fa-droplet"></i></span>
      <span class="label">Cash Flow</span>
    </a>

    <a class="nav-item spa-link" href="consensus.html">
      <span class="icon"><i class="fa-solid fa-people-roof"></i></span>
      <span class="label">Consensus</span>
    </a>



  </nav>

  <div class="divider"></div>

  <!-- REPORTS -->
  <div class="section-title">Reports</div>
  <nav class="nav-list" aria-label="Reports">

    <a class="nav-item spa-link" href="reports_latest.html">
      <span class="icon"><i class="fa-solid fa-file-lines"></i></span>
      <span class="label">Latest Reports</span>
    </a>

    <a class="nav-item spa-link" href="reports_archive.html">
      <span class="icon"><i class="fa-solid fa-clock-rotate-left"></i></span>
      <span class="label">Archive</span>
    </a>

  </nav>

  <div class="divider"></div>

  <!-- PAGES -->
  <div class="section-title">Pages</div>
  <nav class="nav-list" aria-label="Pages">

    <a class="nav-item spa-link" href="help.html">
      <span class="icon"><i class="fa-regular fa-circle-question"></i></span>
      <span class="label">Help</span>
    </a>

    <a class="nav-item spa-link" href="education.html">
      <span class="icon"><i class="fa-solid fa-graduation-cap"></i></span>
      <span class="label">Education</span>
    </a>

    <a class="nav-item spa-link" href="privacy.html">
      <span class="icon"><i class="fa-solid fa-user-secret"></i></span>
      <span class="label">Privacy Policy</span>
    </a>

    <a class="nav-item spa-link" href="terms.html">
      <span class="icon"><i class="fa-solid fa-file-contract"></i></span>
      <span class="label">Terms & Conditions</span>
    </a>

  </nav>

  <!-- FOOTER PROMO (CTA â€“ × ×©×ž×¨) -->
  <div class="sidebar-footer">
    <div class="promo" id="promoCard" role="region" aria-label="Promo">
      <div class="close-btn" id="promoClose">
        <i class="fa-solid fa-xmark"></i>
      </div>
      <div class="art">
        <i class="fa-solid fa-bolt-lightning" style="color:white;font-size:26px;"></i>
      </div>
      <h4>Your realtime edge</h4>
      <p>Connect earnings, scores and watchlists into one live.</p>
      <div class="cta">
        <a href="purchase.html" class="spa-link">
          <i class="fa-solid fa-rocket"></i>
          <span>Upgrade to Pro</span>
        </a>
      </div>
    </div>
  </div>

</aside>





    <!-- MAIN -->
    <main class="main" id="main" role="main">
      <div id="page" class="content-wide" aria-live="polite">
<!-- ===============================
 DASHBOARD HEADER
=============================== -->
<section class="dash-header" data-section="dashboard.header">
  <div class="dash-header-left">
    <h1 class="dash-title">Dashboard</h1>
    <p class="dash-subtitle">Overview of your activity and features</p>
  </div>
  <div class="dash-header-right">
    <button class="dash-btn-primary">âž• New</button>
  </div>
</section>


<!-- ===============================
 STATS OVERVIEW
=============================== -->
<section class="dash-stats" data-section="dashboard.stats">
  <div class="dash-stat-card">
    <span class="stat-label">Appointments Today</span>
    <span class="stat-value">12</span>
  </div>
  <div class="dash-stat-card">
    <span class="stat-label">Upcoming</span>
    <span class="stat-value">38</span>
  </div>
  <div class="dash-stat-card">
    <span class="stat-label">New Leads</span>
    <span class="stat-value">7</span>
  </div>
  <div class="dash-stat-card">
    <span class="stat-label">Status</span>
    <span class="stat-value stat-ok">Active</span>
  </div>
</section>


<!-- ===============================
 MAIN MODULE AREA
=============================== -->
<section class="dash-modules" data-section="dashboard.modules">

  <!-- APPOINTMENTS -->
  <div class="dash-card" data-module="appointments">
    <div class="dash-card-header">
      <h3>Appointments</h3>
      <span class="dash-card-meta">Today</span>
    </div>
    <div class="dash-card-body">
      <div class="row">
        <span>09:30</span>
        <span>John Smith</span>
        <span class="badge confirmed">Confirmed</span>
      </div>
      <div class="row">
        <span>11:00</span>
        <span>Sarah Cohen</span>
        <span class="badge pending">Pending</span>
      </div>
    </div>
  </div>

  <!-- LEADS -->
  <div class="dash-card" data-module="leads">
    <div class="dash-card-header">
      <h3>Leads</h3>
      <span class="dash-card-meta">Last 7 days</span>
    </div>
    <div class="dash-card-body">
      <div class="row">
        <span>David Levi</span>
        <span>Dental consultation</span>
      </div>
      <div class="row">
        <span>Anna Green</span>
        <span>Follow-up request</span>
      </div>
    </div>
  </div>

</section>


<!-- ===============================
 SETTINGS PREVIEW
=============================== -->
<section class="dash-settings-preview" data-section="dashboard.settings">
  <div class="dash-card">
    <div class="dash-card-header">
      <h3>Active Features</h3>
    </div>
    <div class="dash-card-body">
      <ul class="feature-list">
        <li class="on">âœ” Booking System</li>
        <li class="off">âœ– Payments</li>
        <li class="off">âœ– CRM</li>
      </ul>
    </div>
  </div>
</section>


      </div>
    </main>

  </div>

  <script>
    (function(){
      const sidebar = document.getElementById('sidebar');
      const sidebarToggle = document.getElementById('sidebarToggle');
      const main = document.getElementById('main');
      const promoClose = document.getElementById('promoClose');
      const promoCard = document.getElementById('promoCard');
      const mq = window.matchMedia('(max-width:920px)');

      // sidebar toggle
      sidebarToggle.addEventListener('click', ()=>{
        if(mq.matches){
          sidebar.classList.toggle('open');
        } else {
          sidebar.classList.toggle('collapsed');
          main.classList.toggle('narrow');
        }
      });

      // sidebar dropdowns
      document.querySelectorAll(".dropdown-btn").forEach(btn=>{
        btn.addEventListener("click",()=>{
          const open = btn.classList.toggle("open");
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
          const arrow = btn.querySelector('.dropdown-arrow');
          arrow.style.transform = open ? 'rotate(180deg)' : 'rotate(0deg)';
          const panel = btn.nextElementSibling;
          panel.style.display = open ? 'flex' : 'none';
        });
      });

      // promo close
      promoClose && promoClose.addEventListener('click', ()=>{ promoCard.style.display = 'none'; });

      // USER MENU
      const avatarBtn = document.getElementById('avatarBtn');
      const userMenu = document.getElementById('userMenu');
      avatarBtn.addEventListener('click', (e)=>{
        e.stopPropagation();
        const open = userMenu.classList.toggle('show');
        avatarBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
      });

      // THEME PANEL
      const themeToggle = document.getElementById('themeToggle');
      const themePanel = document.getElementById('themePanel');

      themeToggle.addEventListener('click', (e)=>{
        e.stopPropagation();
        const open = themePanel.classList.toggle('show');
        themeToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
        updateThemeChecks();
      });

      document.addEventListener('click', (e)=>{
        if(!userMenu.contains(e.target) && !avatarBtn.contains(e.target)) userMenu.classList.remove('show');
        if(!themePanel.contains(e.target) && !themeToggle.contains(e.target)) themePanel.classList.remove('show');
        if(mq.matches && sidebar.classList.contains('open')){
          const inside = sidebar.contains(e.target) || sidebarToggle.contains(e.target);
          if(!inside) sidebar.classList.remove('open');
        }
      });

      document.addEventListener('keydown', (e)=>{
        if(e.key==='Escape'){ userMenu.classList.remove('show'); themePanel.classList.remove('show'); sidebar.classList.remove('open'); }
      });

      // THEME MANAGEMENT
      const themeRows = Array.from(document.querySelectorAll('.theme-row'));
      const THEME_KEY = 'falcon_theme_choice';
      function applyTheme(choice){
        document.body.classList.remove('light-theme');
        document.documentElement.classList.remove('auto-theme');
        if(choice === 'light'){ document.body.classList.add('light-theme'); }
        else if(choice === 'dark'){ /* default dark */ }
        else if(choice === 'auto'){ document.documentElement.classList.add('auto-theme'); }
        try{ localStorage.setItem(THEME_KEY, choice); } catch(e){}
        updateThemeChecks();
      }
      function initTheme(){
        let saved = null;
        try{ saved = localStorage.getItem(THEME_KEY); } catch(e){}
        if(!saved) saved = 'dark';
        applyTheme(saved);
      }
      function updateThemeChecks(){
        const current = localStorage.getItem(THEME_KEY) || 'dark';
        themeRows.forEach(r=>{
          const ch = r.querySelector('.check');
          if(r.dataset.theme === current) ch.style.display = 'block'; else ch.style.display = 'none';
        });
      }
      themeRows.forEach(r=>{
        r.addEventListener('click', (e)=>{ const choice = r.dataset.theme; applyTheme(choice); themePanel.classList.remove('show'); });
        r.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { r.click(); } });
      });



      initTheme();
      updateThemeChecks();
      window.addEventListener('resize', ()=>{ if(!mq.matches) sidebar.classList.remove('open'); });

/* SPA loader */
document.addEventListener('click', async (ev)=>{

  // --- IMPORTANT ---
    // Disable SPA entirely on login / signup / reset pages
    const p = location.pathname;
    if (p.includes('login') || p.includes('signup') || p.includes('reset')) {
        return;   // Do NOT intercept any clicks on auth pages
    }

    // 1) REAL FIX â€” detect logout BEFORE SPA logic
 if (ev.target.closest('#logoutBtn')) {
    console.log("Logging out...");

    await supabase.auth.signOut({ scope: "global" });  // â† FIX

    localStorage.clear();
    sessionStorage.clear();

    window.location.href = "login.html";
    return;
}

    // 2) SPA logic
    const a = ev.target.closest('a.spa-link');
    if (!a) return;

    // disable SPA for dashboard
    if (a.getAttribute("href") === "dashboard.html") {
        window.location.href = "dashboard.html";
        return;
}

if (a.target === '_blank' || a.href.startsWith('http')) return;
ev.preventDefault();
const url = a.getAttribute('href');
        try{
          const res = await fetch(url, {cache: 'no-store'});
          if(!res.ok){ window.location.href = url; return; }
          const html = await res.text();
          const doc = new DOMParser().parseFromString(html, 'text/html');
          const page = doc.getElementById('page') || doc.querySelector('main') || doc.body;
          if(page) main.innerHTML = page.innerHTML; else main.innerHTML = html;
          history.pushState({spa:true, url}, '', url);
          if(typeof window.onPageLoaded === 'function') window.onPageLoaded(url);
        }catch(err){ console.error('SPA load failed', err); window.location.href = url; }
      });

      window.addEventListener('popstate', async (ev)=>{
        if(ev.state && ev.state.url){
          try{
            const res = await fetch(ev.state.url);
            const html = await res.text();
            const doc = new DOMParser().parseFromString(html, 'text/html');
            const page = doc.getElementById('page') || doc.querySelector('main') || doc.body;
            document.querySelector('main').innerHTML = (page && page.innerHTML) || html;
          }catch(e){ location.reload(); }
        } else { location.reload(); }
      });
    })();
  </script>


 <script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

// ------------------------------------------------------
// SINGLE Supabase client for entire dashboard
// ------------------------------------------------------
const SUPABASE_URL = "https://xkchlqcwntcoakmyicqb.supabase.co";
const ANON_KEY =  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhrY2hscWN3bnRjb2FrbXlpY3FiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4MDMyNzEsImV4cCI6MjA3ODM3OTI3MX0.702fpZLEHukvswrY0uwHknQYwdNDW-HeNsQxu_f1NnU";

const supabase = createClient(SUPABASE_URL, ANON_KEY);
// ---- HANDLE GOOGLE OAUTH REDIRECT ----
// ---- HANDLE GOOGLE OAUTH REDIRECT ----
document.addEventListener("DOMContentLoaded", async () => {
    const hash = window.location.hash;

    if (hash.includes("access_token")) {
        const params = new URLSearchParams(hash.substring(1));

        await supabase.auth.setSession({
            access_token: params.get("access_token"),
            refresh_token: params.get("refresh_token")
        });

        window.location.hash = "";
        window.location.href = "dashboard.html";
    }
});



window.supabase = supabase;


// ------------------------------------------------------
// Helper: get YYYY-MM-DD local date
// ------------------------------------------------------
function getToday() {
  const d = new Date();
  return d.toISOString().slice(0, 10);
}

// ------------------------------------------------------
// LOAD COMPANIES REPORTING TODAY
// ------------------------------------------------------
async function loadCompaniesReportingToday() {
  const today = getToday();

  const { count, error } = await supabase
    .from("earnings_calendar_us")
    .select("symbol", { count: "exact", head: true })
    .eq("date", today);

  if (error) {
    console.error("Error loading kpi-reporting-today:", error);
    return;
  }

  document.getElementById("kpi-reporting-today").textContent = count || 0;
}

// ------------------------------------------------------
// LOAD AVERAGE SCORE
// ------------------------------------------------------
async function loadAverageScore() {
  const { data, error } = await supabase
    .from("analyst_financial_scores")
    .select("total_score")
    .not("total_score", "is", null);

  if (error) {
    console.error("Error loading avg score:", error);
    return;
  }

  if (!data || data.length === 0) {
    document.getElementById("kpi-average-score").textContent = "0";
    return;
  }

  const scores = data
    .map(r => Number(r.total_score))
    .filter(n => !isNaN(n));

  if (scores.length === 0) {
    document.getElementById("kpi-average-score").textContent = "0";
    return;
  }

  const sum = scores.reduce((acc, n) => acc + n, 0);
  const avg = Math.round(sum / scores.length);

  document.getElementById("kpi-average-score").textContent = avg;
}

// -------------------------------------------------------------
// LOAD HIGH QUALITY BEATS (score â‰¥ 65)
// -------------------------------------------------------------
async function loadHighQualityBeats() {
  const { data, error } = await supabase
    .from("analyst_financial_scores")
    .select("total_score")
    .gte("total_score", 65)
    .not("total_score", "is", null);

  if (error) {
    console.error("Error loading high-quality beats:", error);
    return;
  }

  const count = data ? data.length : 0;

  document.getElementById("kpi-high-quality-beats").textContent = count;
}


// ------------------------------------------------------
// REFRESH GUARD
// ------------------------------------------------------
let lastRefresh = 0;
function refreshGuarded() {
  const now = Date.now();
  if (now - lastRefresh < 600) return;
  lastRefresh = now;

  loadAverageScore();
  loadCompaniesReportingToday();
  loadHighQualityBeats();
}

// ------------------------------------------------------
// FIRST LOAD
// ------------------------------------------------------
loadAverageScore();
loadCompaniesReportingToday();
loadHighQualityBeats();

// ------------------------------------------------------
// REALTIME LISTENER â€” earnings_calendar_us
// ------------------------------------------------------
supabase
  .channel("rt_calendar_dashboard")
  .on(
    "postgres_changes",
    { event: "*", schema: "public", table: "earnings_calendar_us" },
    (payload) => {
      console.log("ðŸ“¡ calendar change:", payload);
      refreshGuarded();
    }
  )
  .subscribe();

// REALTIME LISTENER â€” analyst_financial_scores
supabase
  .channel("rt_financial_scores_dashboard")   // â† ×©× ×—×“×© ×•×™×™×—×•×“×™
  .on(
    "postgres_changes",
    { event: "*", schema: "public", table: "analyst_financial_scores" },
    (payload) => {
      console.log("ðŸ“¡ financial scores change:", payload);
      refreshGuarded();
    }
  )
  .subscribe();

// ---- AUTH CHECK ----
supabase.auth.getSession().then(({ data, error }) => {
    if (error || !data.session) {
        console.log("Not logged in â†’ redirect");
        window.location.href = "login.html";
    } else {
        console.log("Logged in user:", data.session.user.email);
        // -------- Set Avatar Dynamically --------
// -------- Set Avatar Dynamically --------
// -------- Set Avatar Dynamically --------
const avatarDiv = document.getElementById("avatarBtn");
const user = data.session.user;

// 1. Google OAuth picture
if (user.user_metadata && user.user_metadata.avatar_url) {
    avatarDiv.style.backgroundImage = `url('${user.user_metadata.avatar_url}')`;
    avatarDiv.style.backgroundPosition = "center";
    avatarDiv.style.backgroundSize = "cover";
    avatarDiv.textContent = ""; // remove letter
}
// 2. First letter from email
else if (user.email) {
    const letter = user.email.charAt(0).toUpperCase();
    avatarDiv.textContent = letter;

    avatarDiv.style.background = "#1e293b";
    avatarDiv.style.color = "white";
    avatarDiv.style.display = "flex";
    avatarDiv.style.alignItems = "center";
    avatarDiv.style.justifyContent = "center";
    avatarDiv.style.fontWeight = "700";
    avatarDiv.style.fontSize = "18px";
}
// 3. Default avatar
else {
    avatarDiv.style.backgroundImage = "url('https://i.pravatar.cc/100?img=5')";
    avatarDiv.style.backgroundPosition = "center";
    avatarDiv.style.backgroundSize = "cover";
}



    }
});




</script>

</body>
</html>
